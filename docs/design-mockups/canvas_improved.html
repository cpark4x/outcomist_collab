<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canvas AI - Improved Design</title>
    <style>
        /* ===== DESIGN SYSTEM TOKENS ===== */
        :root {
            /* Spacing System (8px base unit) */
            --space-1: 4px;
            --space-2: 8px;
            --space-3: 12px;
            --space-4: 16px;
            --space-6: 24px;
            --space-8: 32px;
            --space-12: 48px;
            --space-16: 64px;

            /* Color System - Semantic tokens */
            --surface-1: #0a0a0a;
            --surface-2: #1a1a1a;
            --surface-3: #2a2a2a;
            --surface-4: #3a3a3a;
            --surface-5: #4a4a4a;

            --text-primary: #e8e8e8;
            --text-secondary: #b4b4b4;
            --text-tertiary: #8a8a8a;

            --status-running-bg: rgba(59, 130, 246, 0.15);
            --status-running-border: #3b82f6;
            --status-running-text: #60a5fa;

            --status-complete-bg: rgba(16, 185, 129, 0.15);
            --status-complete-border: #10b981;
            --status-complete-text: #34d399;

            --status-error-bg: rgba(239, 68, 68, 0.15);
            --status-error-border: #ef4444;
            --status-error-text: #f87171;

            --accent-primary: #3b82f6;
            --accent-primary-hover: #2563eb;
            --accent-success: #10b981;

            /* Typography Scale (1.25Ã— ratio) */
            --text-xs: 11px;
            --text-sm: 13px;
            --text-base: 16px;
            --text-lg: 20px;
            --text-xl: 24px;
            --text-2xl: 30px;

            --weight-regular: 400;
            --weight-medium: 500;
            --weight-semibold: 600;
            --weight-bold: 700;

            --leading-tight: 1.25;
            --leading-base: 1.5;
            --leading-relaxed: 1.75;

            /* Motion Timing (locked for quality) */
            --duration-instant: 100ms;
            --duration-responsive: 150ms;
            --duration-deliberate: 300ms;
            --duration-slow: 500ms;

            --ease-smooth: cubic-bezier(0.23, 0.88, 0.26, 0.92);
            --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
            --ease-exit: cubic-bezier(0.4, 0, 1, 1);
            --ease-enter: cubic-bezier(0, 0, 0.2, 1);

            /* Shadow System (4 layers) */
            --shadow-border: 0 0 0 1px rgba(255, 255, 255, 0.06);
            --shadow-highlight: 0 1px 2px rgba(255, 255, 255, 0.08);
            --shadow-near:
                var(--shadow-border),
                0 2px 8px rgba(0, 0, 0, 0.3),
                0 4px 16px rgba(0, 0, 0, 0.2);
            --shadow-far:
                var(--shadow-border),
                0 8px 24px rgba(0, 0, 0, 0.4),
                0 16px 48px rgba(0, 0, 0, 0.3);
            --shadow-selected:
                0 0 0 1px var(--accent-primary),
                0 0 0 4px rgba(59, 130, 246, 0.2),
                var(--shadow-far);
        }

        /* ===== BASE STYLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--surface-1);
            color: var(--text-primary);
            height: 100vh;
            overflow: hidden;
            font-size: var(--text-base);
            line-height: var(--leading-base);
        }

        /* ===== TOOLBAR ===== */
        .canvas-toolbar {
            height: var(--space-16);
            padding: 0 var(--space-6);
            display: flex;
            align-items: center;
            gap: var(--space-4);

            /* Glassmorphism effect */
            background: rgba(26, 26, 26, 0.7);
            backdrop-filter: blur(12px) saturate(180%) brightness(110%);
            -webkit-backdrop-filter: blur(12px) saturate(180%) brightness(110%);
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: var(--shadow-near);

            position: relative;
            z-index: 100;
        }

        .toolbar-section {
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .toolbar-divider {
            width: 1px;
            height: 24px;
            background: var(--surface-4);
        }

        .toolbar-spacer {
            flex: 1;
        }

        /* ===== BUTTON SYSTEM ===== */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-2) var(--space-4);
            border-radius: 6px;
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            line-height: var(--leading-tight);
            cursor: pointer;
            border: 1px solid transparent;
            transition: all var(--duration-instant) var(--ease-smooth);
            text-decoration: none;
        }

        .btn:focus-visible {
            outline: 2px solid var(--accent-primary);
            outline-offset: 2px;
        }

        .btn--primary {
            background: var(--accent-primary);
            color: white;
            border-color: var(--accent-primary);
        }

        .btn--primary:hover {
            background: var(--accent-primary-hover);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        .btn--secondary {
            background: var(--surface-3);
            color: var(--text-primary);
            border-color: var(--surface-4);
        }

        .btn--secondary:hover {
            background: var(--surface-4);
            border-color: var(--surface-5);
        }

        .btn--ghost {
            background: transparent;
            color: var(--text-secondary);
        }

        .btn--ghost:hover {
            background: var(--surface-3);
            color: var(--text-primary);
        }

        .btn-icon {
            width: 16px;
            height: 16px;
            stroke-width: 2px;
        }

        /* ===== CANVAS CONTAINER ===== */
        .canvas-container {
            width: 100%;
            height: calc(100vh - var(--space-16));
            overflow: auto;
            position: relative;

            /* Enhanced background with subtle energy */
            background:
                radial-gradient(ellipse at 20% 20%, rgba(59, 130, 246, 0.03) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(16, 185, 129, 0.02) 0%, transparent 50%),
                var(--surface-1);
        }

        .canvas {
            position: relative;
            min-width: 3000px;
            min-height: 2000px;
            padding: var(--space-12);

            /* Enhanced grid pattern */
            background-image:
                linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 60px 60px;
        }

        /* ===== EMPTY STATE ===== */
        .canvas-empty-state {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            max-width: 480px;
            padding: var(--space-12);
        }

        .empty-state-icon {
            width: 64px;
            height: 64px;
            margin: 0 auto var(--space-6);
            color: var(--accent-primary);
            opacity: 0.6;
        }

        .canvas-empty-state h2 {
            font-size: var(--text-2xl);
            font-weight: var(--weight-semibold);
            margin-bottom: var(--space-3);
            color: var(--text-primary);
        }

        .canvas-empty-state p {
            font-size: var(--text-base);
            color: var(--text-secondary);
            margin-bottom: var(--space-6);
            line-height: var(--leading-relaxed);
        }

        .empty-state-actions {
            display: flex;
            gap: var(--space-3);
            justify-content: center;
            margin-bottom: var(--space-8);
        }

        .empty-state-hint {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-2);
            font-size: var(--text-sm);
            color: var(--text-tertiary);
        }

        .empty-state-hint kbd {
            padding: 2px 6px;
            background: var(--surface-3);
            border: 1px solid var(--surface-4);
            border-radius: 4px;
            font-size: var(--text-xs);
            font-weight: var(--weight-medium);
            font-family: 'SF Mono', Monaco, monospace;
        }

        /* ===== WIDGET CARDS ===== */
        .agent-widget {
            position: absolute;
            background: var(--surface-2);
            border: 1px solid var(--surface-4);
            border-radius: 12px;
            box-shadow: var(--shadow-far);
            overflow: hidden;
            transition: box-shadow var(--duration-instant) var(--ease-smooth);
            width: 480px;
        }

        .agent-widget:hover {
            box-shadow: var(--shadow-far), var(--shadow-highlight);
        }

        .agent-widget--running {
            background: var(--status-running-bg);
            border-left: 3px solid var(--status-running-border);
        }

        .agent-widget--complete {
            background: var(--status-complete-bg);
            border-left: 3px solid var(--status-complete-border);
        }

        .agent-widget--selected {
            box-shadow: var(--shadow-selected);
        }

        .widget-header {
            background: var(--surface-3);
            padding: var(--space-4);
            border-bottom: 1px solid var(--surface-4);
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: grab;
        }

        .widget-header:active {
            cursor: grabbing;
        }

        .widget-header-left {
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }

        .widget-drag-handle {
            color: var(--text-tertiary);
            font-size: var(--text-lg);
            cursor: grab;
        }

        .widget-title {
            font-size: var(--text-lg);
            font-weight: var(--weight-semibold);
            color: var(--text-primary);
        }

        .widget-status {
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-1) var(--space-3);
            border-radius: 12px;
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
        }

        .widget-status--running {
            color: var(--status-running-text);
        }

        .widget-status--complete {
            color: var(--status-complete-text);
        }

        .status-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: currentColor;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .widget-actions {
            display: flex;
            gap: var(--space-2);
        }

        .widget-btn {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            border-radius: 6px;
            transition: all var(--duration-instant) var(--ease-smooth);
        }

        .widget-btn:hover {
            background: var(--surface-4);
            color: var(--text-primary);
        }

        .widget-content {
            padding: var(--space-6);
            background: var(--surface-2);
        }

        .widget-content p {
            color: var(--text-secondary);
            line-height: var(--leading-relaxed);
        }

        /* ===== CANVAS INFO ===== */
        .canvas-info {
            display: flex;
            align-items: center;
            gap: var(--space-4);
            font-size: var(--text-sm);
            color: var(--text-secondary);
        }

        .canvas-info-item {
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .sync-indicator {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-1) var(--space-3);
            background: var(--status-complete-bg);
            border-radius: 12px;
            color: var(--status-complete-text);
            font-size: var(--text-xs);
            font-weight: var(--weight-medium);
        }

        /* ===== MINIMAP ===== */
        .minimap {
            position: fixed;
            bottom: var(--space-6);
            right: var(--space-6);
            width: 200px;
            height: 150px;
            background: rgba(26, 26, 26, 0.95);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--surface-4);
            border-radius: 8px;
            box-shadow: var(--shadow-near);
            padding: var(--space-2);
        }

        .minimap-title {
            font-size: var(--text-xs);
            color: var(--text-tertiary);
            margin-bottom: var(--space-2);
            font-weight: var(--weight-medium);
        }

        .minimap-canvas {
            position: relative;
            width: 100%;
            height: calc(100% - 20px);
            background: var(--surface-1);
            border-radius: 4px;
            overflow: hidden;
        }

        .minimap-viewport {
            position: absolute;
            border: 2px solid var(--accent-primary);
            background: rgba(59, 130, 246, 0.1);
            width: 60px;
            height: 40px;
            top: 10px;
            left: 10px;
        }

        .minimap-widget {
            position: absolute;
            background: var(--surface-4);
            border-radius: 2px;
        }

        /* ===== ICONS (SVG Inline) ===== */
        .icon {
            width: 1em;
            height: 1em;
            stroke: currentColor;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
            fill: none;
        }

        /* ===== ANNOTATIONS ===== */
        .design-annotation {
            position: fixed;
            background: rgba(59, 130, 246, 0.9);
            backdrop-filter: blur(8px);
            color: white;
            padding: var(--space-2) var(--space-3);
            border-radius: 6px;
            font-size: var(--text-xs);
            font-weight: var(--weight-medium);
            z-index: 10000;
            pointer-events: none;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .annotation-1 { top: 80px; left: 20px; }
        .annotation-2 { top: 80px; right: 420px; }
        .annotation-3 { bottom: 180px; right: 20px; }

        /* ===== RESPONSIVE ===== */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation: none !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <!-- Toolbar -->
    <div class="canvas-toolbar">
        <div class="toolbar-section">
            <button class="btn btn--primary" title="Create new agent (âŒ˜N)">
                <svg class="btn-icon icon" viewBox="0 0 24 24">
                    <path d="M12 5v14M5 12h14"/>
                </svg>
                <span>New Agent</span>
            </button>
            <button class="btn btn--secondary" title="Open file browser">
                <svg class="btn-icon icon" viewBox="0 0 24 24">
                    <path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"/>
                </svg>
                <span>Browse Files</span>
            </button>
            <button class="btn btn--secondary" title="Open document editor">
                <svg class="btn-icon icon" viewBox="0 0 24 24">
                    <path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/>
                    <path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/>
                </svg>
                <span>New Document</span>
            </button>
        </div>

        <div class="toolbar-divider"></div>

        <div class="toolbar-section">
            <button class="btn btn--ghost" title="Auto-arrange workspace (âŒ˜A)">
                <svg class="btn-icon icon" viewBox="0 0 24 24">
                    <rect x="3" y="3" width="7" height="7"/>
                    <rect x="14" y="3" width="7" height="7"/>
                    <rect x="14" y="14" width="7" height="7"/>
                    <rect x="3" y="14" width="7" height="7"/>
                </svg>
                <span>Arrange</span>
            </button>
        </div>

        <div class="toolbar-divider"></div>

        <div class="toolbar-section">
            <button class="btn btn--ghost" title="Zoom out (âŒ˜-)">
                <svg class="btn-icon icon" viewBox="0 0 24 24">
                    <circle cx="11" cy="11" r="8"/>
                    <path d="M21 21l-4.35-4.35"/>
                    <path d="M8 11h6"/>
                </svg>
            </button>
            <span style="font-size: var(--text-sm); color: var(--text-secondary); font-weight: var(--weight-medium);">100%</span>
            <button class="btn btn--ghost" title="Zoom in (âŒ˜+)">
                <svg class="btn-icon icon" viewBox="0 0 24 24">
                    <circle cx="11" cy="11" r="8"/>
                    <path d="M21 21l-4.35-4.35"/>
                    <path d="M11 8v6M8 11h6"/>
                </svg>
            </button>
            <button class="btn btn--ghost" title="Reset zoom and pan (âŒ˜0)">
                <svg class="btn-icon icon" viewBox="0 0 24 24">
                    <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0118.8-4.3M22 12.5a10 10 0 01-18.8 4.2"/>
                </svg>
                <span>Reset</span>
            </button>
        </div>

        <div class="toolbar-spacer"></div>

        <div class="canvas-info">
            <div class="canvas-info-item">
                <span style="color: var(--text-tertiary);">Widgets:</span>
                <span style="font-weight: var(--weight-medium);">3</span>
            </div>
            <div class="sync-indicator">
                <svg class="icon" style="width: 12px; height: 12px;" viewBox="0 0 24 24">
                    <path d="M20 6L9 17l-5-5"/>
                </svg>
                <span>Synced</span>
            </div>
        </div>

        <div class="toolbar-divider"></div>

        <div class="toolbar-section">
            <button class="btn btn--ghost" title="Settings (âŒ˜,)">
                <svg class="btn-icon icon" viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="3"/>
                    <path d="M12 1v6m0 6v6"/>
                    <path d="M17.2 3.4l-3 5.2m-6.4 0l-3-5.2"/>
                    <path d="M17.2 20.6l-3-5.2m-6.4 0l-3 5.2"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- Canvas Container -->
    <div class="canvas-container">
        <div class="canvas">
            <!-- Empty State (shown when no widgets) -->
            <div class="canvas-empty-state">
                <svg class="empty-state-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <rect x="3" y="3" width="7" height="7" stroke-width="2"/>
                    <rect x="14" y="3" width="7" height="7" stroke-width="2"/>
                    <rect x="14" y="14" width="7" height="7" stroke-width="2"/>
                    <rect x="3" y="14" width="7" height="7" stroke-width="2"/>
                </svg>
                <h2>Your Canvas is Ready</h2>
                <p>Create your first agent to start working, or open files to explore your project.</p>
                <div class="empty-state-actions">
                    <button class="btn btn--primary">
                        <svg class="btn-icon icon" viewBox="0 0 24 24">
                            <path d="M12 5v14M5 12h14"/>
                        </svg>
                        <span>Create Agent</span>
                    </button>
                    <button class="btn btn--secondary">
                        <svg class="btn-icon icon" viewBox="0 0 24 24">
                            <path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"/>
                        </svg>
                        <span>Browse Files</span>
                    </button>
                </div>
                <div class="empty-state-hint">
                    <svg class="icon" style="width: 14px; height: 14px;" viewBox="0 0 24 24">
                        <rect x="2" y="4" width="20" height="16" rx="2"/>
                        <path d="M6 8h.01M10 8h.01M14 8h.01M18 8h.01"/>
                    </svg>
                    <span>Press <kbd>âŒ˜N</kbd> to create agent anywhere</span>
                </div>
            </div>

            <!-- Example Widgets (normally hidden when empty state shows) -->
            <div class="agent-widget agent-widget--running" style="left: 100px; top: 500px; opacity: 0.3;">
                <div class="widget-header">
                    <div class="widget-header-left">
                        <span class="widget-drag-handle">â‹®â‹®</span>
                        <span class="widget-title">Data Analysis Agent</span>
                    </div>
                    <div class="widget-actions">
                        <div class="widget-status widget-status--running">
                            <span class="status-dot"></span>
                            <span>Running</span>
                        </div>
                        <button class="widget-btn" title="Minimize">
                            <svg class="icon" style="width: 16px; height: 16px;" viewBox="0 0 24 24">
                                <path d="M5 12h14"/>
                            </svg>
                        </button>
                        <button class="widget-btn" title="Close">
                            <svg class="icon" style="width: 16px; height: 16px;" viewBox="0 0 24 24">
                                <path d="M18 6L6 18M6 6l12 12"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="widget-content">
                    <p>Analyzing sales data from Q4 2024...</p>
                </div>
            </div>

            <div class="agent-widget agent-widget--complete" style="left: 650px; top: 500px; opacity: 0.3;">
                <div class="widget-header">
                    <div class="widget-header-left">
                        <span class="widget-drag-handle">â‹®â‹®</span>
                        <span class="widget-title">Report Generator</span>
                    </div>
                    <div class="widget-actions">
                        <div class="widget-status widget-status--complete">
                            <span class="status-dot"></span>
                            <span>Complete</span>
                        </div>
                        <button class="widget-btn">
                            <svg class="icon" style="width: 16px; height: 16px;" viewBox="0 0 24 24">
                                <path d="M5 12h14"/>
                            </svg>
                        </button>
                        <button class="widget-btn">
                            <svg class="icon" style="width: 16px; height: 16px;" viewBox="0 0 24 24">
                                <path d="M18 6L6 18M6 6l12 12"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="widget-content">
                    <p>Executive summary generated successfully.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Minimap -->
    <div class="minimap">
        <div class="minimap-title">WORKSPACE MAP</div>
        <div class="minimap-canvas">
            <div class="minimap-viewport"></div>
            <div class="minimap-widget" style="left: 10px; top: 50px; width: 40px; height: 25px; background: var(--status-running-border);"></div>
            <div class="minimap-widget" style="left: 65px; top: 50px; width: 40px; height: 25px; background: var(--status-complete-border);"></div>
        </div>
    </div>

    <!-- Design Annotations -->
    <div class="design-annotation annotation-1">
        âœ¨ Professional icon system<br>
        (no emojis!)
    </div>
    <div class="design-annotation annotation-2">
        âœ¨ Semantic color tokens<br>
        WCAG AA compliant
    </div>
    <div class="design-annotation annotation-3">
        âœ¨ Minimap for<br>
        spatial orientation
    </div>

    <script>
        // Simple interactivity demo
        document.querySelectorAll('.btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                if (btn.textContent.includes('Create Agent')) {
                    alert('ðŸŽ¯ This would create a new agent widget on the canvas');
                } else if (btn.textContent.includes('Arrange')) {
                    alert('ðŸŽ¯ This would auto-arrange all widgets using the golden ratio algorithm');
                }
            });
        });

        // Remove annotations after 5 seconds
        setTimeout(() => {
            document.querySelectorAll('.design-annotation').forEach(el => {
                el.style.transition = 'opacity 0.5s';
                el.style.opacity = '0';
            });
        }, 5000);
    </script>
</body>
</html>
